{"version":3,"sources":["../../src/utils/numbers.ts","../../src/hooks/use-query.ts","../../src/hooks/use-async-action.ts"],"names":["_"],"mappings":";;;;;;AAkCO,SAAS,SAAS,GAAA,EAAyB;AAChD,EAAA,MAAM,CAAA,GAAI,IAAI,SAAA,CAAU,GAAG,CAAA;AAC3B,EAAA,OAAO,CAAA,CAAE,QAAA,EAAS,IAAK,CAAC,EAAE,KAAA,EAAM;AAClC;;;ACjCe,SAAR,QAAA,GAA4B;AACjC,EAAA,MAAM,CAAC,KAAK,CAAA,GAAI,eAAA,EAAgB;AAChC,EAAA,OAAO,OAAA;AAAA,IACL,MACE,KAAA,CAAM,OAAA,EAAQ,CAAE,MAAA,CAAO,CAAC,GAAA,EAAK,CAAC,GAAA,EAAK,KAAK,CAAA,KAAM;AAC5C,MAAA,IAAI,UAAU,WAAA,EAAa;AACzB,QAAA,GAAA,CAAI,GAAG,CAAA,GAAI,MAAA;AAAA,MACb,CAAA,MAAA,IAAW,UAAU,MAAA,EAAQ;AAC3B,QAAA,GAAA,CAAI,GAAG,CAAA,GAAI,IAAA;AAAA,MACb,WAES,KAAA,CAAM,MAAA,IAAU,EAAA,IAAM,QAAA,CAAS,KAAK,CAAA,EAAG;AAC9C,QAAA,GAAA,CAAI,GAAG,CAAA,GAAI,MAAA,CAAO,KAAK,CAAA;AAAA,MACzB,CAAA,MAAA,IAES,KAAA,CAAM,QAAA,CAAS,GAAG,CAAA,EAAG;AAC5B,QAAA,GAAA,CAAI,GAAG,CAAA,GAAI,KAAA,CAAM,KAAA,CAAM,GAAG,CAAA,CAAE,GAAA,CAAI,CAAA,IAAA,KAAS,QAAA,CAAS,IAAI,CAAA,GAAI,MAAA,CAAO,IAAI,IAAI,IAAK,CAAA;AAAA,MAChF,CAAA,MAAO;AACL,QAAA,GAAA,CAAI,GAAG,CAAA,GAAI,KAAA;AAAA,MACb;AACA,MAAA,OAAO,GAAA;AAAA,IACT,CAAA,EAAG,EAAyB,CAAA;AAAA,IAC9B,CAAC,KAAK;AAAA,GACR;AACF;ACnBe,SAAR,eACL,QAAA,EACA;AACA,EAAA,MAAM,CAAC,CAAA,EAAG,MAAA,EAAQ,OAAO,CAAA,GAAI,cAAA;AAAA,IAC3B,CAACA,EAAAA,EAAS,OAAA,KAAe,QAAA,CAAS,OAAO,CAAA;AAAA,IACzC;AAAA,GACF;AACA,EAAA,OAAO,CAAC,CAAC,MAAA,KAAc,eAAA,CAAgB,MAAM,MAAA,CAAO,MAAM,CAAC,CAAA,EAAG,OAAO,CAAA;AACvE","file":"index.js","sourcesContent":["import Bignumber from 'bignumber.js'\n\n/**千分位 */\nexport function thousands(num: number | string) {\n  if (!isNumber(num)) return num\n  const arr = String(num).split('.')\n  const intPart = arr[0].replace(/(\\d)(?=(\\d{3})+$)/g, '$1,')\n  return arr[1] ? `${intPart}.${arr[1]}` : intPart\n}\n\n/**小数保留n位 */\nexport function toFixed(num: number | string, n = 2) {\n  return new Bignumber(num).toFixed(n)\n}\n\n/**四舍五入 */\nexport function round(num: number | string, n = 2) {\n  return new Bignumber(num).decimalPlaces(n, Bignumber.ROUND_HALF_UP).toNumber()\n}\n\n/**小数不足n位补零 */\nexport function zerofill(num: number | string, n = 2) {\n  const [intPart, decPart = ''] = String(num).split('.')\n  if (decPart.length >= n) return num\n  const filledDec = decPart.padEnd(n, '0').slice(0, n)\n  return `${intPart}.${filledDec}`\n}\n\n/**数字转换为百分比模式 */\nexport function toPercent(num: number | string) {\n  return multiply(num, 100) + '%'\n}\n\n/**判断是否是数字 */\nexport function isNumber(num: any): num is number {\n  const n = new Bignumber(num)\n  return n.isFinite() && !n.isNaN()\n}\n\n/**乘法 */\nexport function multiply(a: number | string, b: number | string) {\n  return new Bignumber(a).times(b).toNumber()\n}\n\n/**除法 */\nexport function divide(a: number | string, b: number | string) {\n  return new Bignumber(a).div(b).toNumber()\n}\n\n/**加法 */\nexport function add(a: number | string, b: number | string) {\n  return new Bignumber(a).plus(b).toNumber()\n}\n\n/**减法 */\nexport function subtract(a: number | string, b: number | string) {\n  return new Bignumber(a).minus(b).toNumber()\n}\n\n/**取余 */\nexport function mod(a: number | string, b: number | string) {\n  return new Bignumber(a).mod(b).toNumber()\n}\n","import { useMemo } from 'react'\nimport { useSearchParams } from 'react-router'\nimport { isNumber } from '@/utils'\n\nexport default function useQuery() {\n  const [query] = useSearchParams()\n  return useMemo(\n    () =>\n      query.entries().reduce((acc, [key, value]) => {\n        if (value === 'undefined') {\n          acc[key] = undefined\n        } else if (value === 'null') {\n          acc[key] = null\n        }\n        // 避免数字长度超过16为转换精度丢失\n        else if (value.length <= 16 && isNumber(value)) {\n          acc[key] = Number(value)\n        }\n        // 以逗号分割的数组\n        else if (value.includes(',')) {\n          acc[key] = value.split(',').map(item => (isNumber(item) ? Number(item) : item))\n        } else {\n          acc[key] = value\n        }\n        return acc\n      }, {} as Record<string, any>),\n    [query]\n  )\n}\n","import { useActionState, startTransition } from 'react'\n\n/**\n * 为异步函数添加 loading，不接收函数返回值\n * @param dispatch 异步函数\n * @returns [action, loading]\n ** action 触发异步函数\n ** loading 异步函数是否执行中\n */\nexport default function useAsyncAction<T extends any = any>(\n  dispatch: (payload: T) => void | Promise<void>\n) {\n  const [_, action, loading] = useActionState<void, T>(\n    (_: void, payload: T) => dispatch(payload),\n    void 0\n  )\n  return [(values: T) => startTransition(() => action(values)), loading] as const\n}\n"]}